const games = [
    {
        name: 'apexLegends',
        category: 'shooter',
        desc: 'Apex Legends is an online multiplayer battle royale game featuringsquads of three players using pre-made characters with distinctive abilities, called "Legends", similar to those of hero shooters.',
        price: '0',
        img: './images/gamesLogo/apexLegends.jpg',
        news: 'REFORGED KINGS CANYON MAP UPDATE Explore the reforged KingsCanyon. What was once Skull Town has risen from the ashes asRelic.',
        newsImg: './images/gameDetailsImg/apexLegends/apexNews.jpg',
        detailsImg: './images/gameDetailsImg/apexLegends/apexDetails.jpg',
        releaseDate: 'February 4, 2019',
        platforms: '<i class="fa-brands fa-windows"></i> <i class="fa-solid fa-mobile-screen"></i> <i class="fa-brands fa-playstation"></i> <i class="fa-brands fa-xbox"></i>',
        sliderImages:[
            './images/gameDetailsImg/apexLegends/slider/apexSlider1.jpg',
            './images/gameDetailsImg/apexLegends/slider/apexSlider2.jpg',
            './images/gameDetailsImg/apexLegends/slider/apexSlider3.jpg',
            './images/gameDetailsImg/apexLegends/slider/apexSlider4.jpg',
            './images/gameDetailsImg/apexLegends/slider/apexSlider5.jpg',
            './images/gameDetailsImg/apexLegends/slider/apexSlider6.jpg',
            './images/gameDetailsImg/apexLegends/slider/apexSlider7.jpg',
            './images/gameDetailsImg/apexLegends/slider/apexSlider8.png',
            './images/gameDetailsImg/apexLegends/slider/apexSlider9.png',
            './images/gameDetailsImg/apexLegends/slider/apexSlider10.png',

        ]
    },

    {
        name: 'grandTheftAuto',
        category: 'shooter',
        desc: 'Grand Theft Auto V is an action-adventure game played from either a third-person or first-person perspective. Players complete missions—linear scenarios with set objectives—to progress through the story. Outside of the missions, players may freely roam the open world.',
        price: '20',
        img: './images/gamesLogo/gta.jpg',
        news: 'REFORGED KINGS CANYON MAP UPDATE Explore the reforged KingsCanyon. What was once Skull Town has risen from the ashes asRelic.',
        newsImg: './images/gameDetailsImg/gtaV/gtaVNews.jpg',
        detailsImg: './images/gameDetailsImg/gtaV/gtaVDetails.jpg',
        releaseDate: 'September 17, 2013',
        platforms: '<i class="fa-brands fa-windows"></i> <i class="fa-solid fa-mobile-screen"></i> <i class="fa-brands fa-playstation"></i> <i class="fa-brands fa-xbox"></i>',
        sliderImages:[
            './images/gameDetailsImg/gtaV/slider/gtaVSlider1.jpg',
            './images/gameDetailsImg/gtaV/slider/gtaVSlider2.jpg',
            './images/gameDetailsImg/gtaV/slider/gtaVSlider3.jpg',
            './images/gameDetailsImg/gtaV/slider/gtaVSlider4.jpg',
            './images/gameDetailsImg/gtaV/slider/gtaVSlider5.jpg',
            './images/gameDetailsImg/gtaV/slider/gtaVSlider6.jpg',
            './images/gameDetailsImg/gtaV/slider/gtaVSlider7.jpg',
            './images/gameDetailsImg/gtaV/slider/gtaVSlider8.jpg',
        ]
    },

    {
        name: 'fortnite',
        category: 'shooter',
        desc: 'Fortnite is a survival game where 100 players fight against each other in player versus player combat to be the last one standing. ',
        price: '0',
        img: './images/gamesLogo/fortnite.jpg',
        news: 'REFORGED KINGS CANYON MAP UPDATE Explore the reforged KingsCanyon. What was once Skull Town has risen from the ashes asRelic.',
        newsImg: './images/gameDetailsImg/fortnite/fortniteNews.jpg',
        detailsImg: './images/gameDetailsImg/fortnite/fortniteDetails.png',
        releaseDate: 'July 21, 2017',
        platforms: '<i class="fa-brands fa-windows"></i> <i class="fa-solid fa-mobile-screen"></i> <i class="fa-brands fa-playstation"></i> <i class="fa-brands fa-xbox"></i>',
        sliderImages:[
            './images/gameDetailsImg/fortnite/slider/fortniteSlider1.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider2.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider3.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider4.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider5.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider6.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider7.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider8.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider7.jpg',
            './images/gameDetailsImg/fortnite/slider/fortniteSlider8.jpg',
        ]
    },
    
    {
        name: 'fifa22',
        category: 'sports',
        desc: 'FIFA 22 introduces "HyperMotion Technology,” which uses motion capture data collected from 22 real-life players playing a complete, high-intensity football match in motion capture suits.',
        price: '40',
        img: './images/gamesLogo/fifa22.jpg',
        news: 'REFORGED KINGS CANYON MAP UPDATE Explore the reforged KingsCanyon. What was once Skull Town has risen from the ashes asRelic.',
        newsImg: './images/gameDetailsImg/fifa22/fifa22News.jpg',
        detailsImg: './images/gameDetailsImg/fifa22/fifa22Details.jpg',
        releaseDate: 'September 27, 2021',
        platforms: '<i class="fa-brands fa-windows"></i> <i class="fa-brands fa-playstation"></i> <i class="fa-brands fa-xbox"></i>',
        sliderImages:[
            './images/gameDetailsImg/fifa22/slider/fifa22Slider1.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider2.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider3.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider4.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider5.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider6.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider7.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider8.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider9.jpg',
            './images/gameDetailsImg/fifa22/slider/fifa22Slider10.jpg',
        ]
    },
    {
        name: 'rocketLeague',
        category: 'sports',
        desc: 'Rocket League is a vehicular soccer video game',
        price: '0',
        img: './images/gamesLogo/rocketLeague.jpg',
        news: 'REFORGED KINGS CANYON MAP UPDATE Explore the reforged KingsCanyon. What was once Skull Town has risen from the ashes asRelic.',
        newsImg: './images/gameDetailsImg/rocketLeague/rocketLeagueNews.jpg',
        detailsImg: './images/gameDetailsImg/rocketLeague/rocketLeagueDetails.jpg',
        releaseDate: 'September 27, 2021',
        platforms: '<i class="fa-brands fa-windows"></i> <i class="fa-brands fa-playstation"></i> <i class="fa-brands fa-xbox"></i>',
        sliderImages:[
            './images/gameDetailsImg/rocketLeague/slider/rocketLeagueSlider1.jpg',
            './images/gameDetailsImg/rocketLeague/slider/rocketLeagueSlider2.jpg',
            './images/gameDetailsImg/rocketLeague/slider/rocketLeagueSlider3.jpg',
            './images/gameDetailsImg/rocketLeague/slider/rocketLeagueSlider4.jpg',
            './images/gameDetailsImg/rocketLeague/slider/rocketLeagueSlider5.jpg',
            './images/gameDetailsImg/rocketLeague/slider/rocketLeagueSlider6.jpg',
            './images/gameDetailsImg/rocketLeague/slider/rocketLeagueSlider7.jpg',
            './images/gameDetailsImg/rocketLeague/slider/rocketLeagueSlider8.jpg',
        ]
    },

];
// Home page selectors
const gamesContainer = document.querySelector('.games-container');
const filterBtns = document.querySelectorAll('.filter-btn');


// load games
// window.addEventListener('DOMContentLoaded', () => {
//     displayGamesArray(games);
    
// });
// console.log(window.location);
if(window.location.pathname == '/' || window.location.pathname == '/index.html'){
  displayGamesArray(games)
}
// filter games
filterBtns.forEach((btn) => {
  btn.addEventListener('click', (e) => {
    removeSelected();
    let filled = false;
    e.currentTarget.classList.add('selected');
    if(e.currentTarget.innerHTML == 'all'){
      displayGamesArray(games);
    }
    else{
      const filterGames = [];
      // console.log(e.currentTarget.innerHTML);
      for (let i =0; i<games.length; i++) {
        if (games[i].category == e.currentTarget.innerHTML){
          filterGames.push(games[i]);
          filled = true
        }
      }
      if (filled)
      displayGamesArray(filterGames)
      else
      gamesContainer.innerHTML = 'no games from selected category'
    }
    })
})


function removeSelected() {
    filterBtns.forEach( btn => {
        btn.classList.remove('selected');
    })
}



function displayGamesArray(array) {
    let displayGames = array.map( (game) => {
        return `
        <div class="game">
          <img src="${game.img}" alt="" />
          <div class="content">
            <h4>${game.name}</h4>
            <div class="progress-line"><span></span></div>
            <div class="info">
              <p>
                Price <br />
                <span>$${game.price}</span>
              </p>
              <button id="${game.name}" class="game-details-btns" >Read More</button>
            </div>
          </div>
        </div>
        `;
    });
    displayGames = displayGames.join('');
    gamesContainer.innerHTML = displayGames;
    // reset the btns enabled to click
    changeBtn();
  }
  
  
  // get the clicked game 
  
  function changeBtn() {
    const gameDetailsBtn = document.querySelectorAll('.game-details-btns');
    gameDetailsBtn.forEach(btn => {
        btn.addEventListener('click', (e) => {
            //  console.log(e.currentTarget.id);
            let gameName = e.currentTarget.id;
            let clickedGame;
            let remainingGames;
    
              clickedGame = games.filter((game) => {return game.name == gameName}); 
              remainingGames = games.filter((game) => {return game.name != gameName}); 
            
            // console.log(clickedGame);
            // console.log(clickedGame[0].sliderImages[0])
            // console.log(remainingGames)
             displayGameDetailsPage(clickedGame, remainingGames);
        })
    })

  }

// display game details page
function displayGameDetailsPage(clickedGame, remainingGames) {
    // console.log(clickedGame[0].name);
    sessionStorage.removeItem('gameDetails');


    let displayCards = remainingGames.map( (game) => {
        return `
        <div class="swiper-slide">
                    <div class="card">
                      <img src="${game.img}" alt="" />
                      <div class="content">
                        <h4>${game.name}</h4>
                        <div class="progress-line"><span></span></div>
                        <div class="info">
                          <button id="${game.name}" class="game-details-btns">
                            Read More
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
        `;
    });
    displayCards = displayCards.join('');

    let displaySliderImg = clickedGame[0].sliderImages.map((img) => {
      return `<div class="swiper-slide">
          <img
            src="${img}"
          />
        </div>`;
    });
    displaySliderImg = displaySliderImg.join('');
    
    var gameDetails = `
        <div class="center">
        <div class="img-details-article">
          <article class="details-images">
            <div
              style="
                --swiper-navigation-color: #fff;
                --swiper-pagination-color: #fff;
              "
              class="swiper mySwiper2"
            >
              <div class="swiper-wrapper">
                ${displaySliderImg}
              </div>
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
            </div>
            <div thumbsSlider="" class="swiper mySwiper">
              <div class="swiper-wrapper">
                ${displaySliderImg}
              </div>
            </div>
          </article>
        </div>
        <div class="news-article">
          <article class="news">
            <h2>News</h2>
            <div class="line"></div>
            <p>
              ${clickedGame[0].news}
            </p>
            <div class="news-img">
              <img src="${clickedGame[0].newsImg}" alt="" />
            </div>
          </article>
        </div>
      </div>
      <div class="right-articles">
        <div class="details">
          <article class="details">
            <div class="main-img">
              <img
                src="${clickedGame[0].detailsImg}"
                alt=""
              />
            </div>
            <h3>
              ${clickedGame[0].name}
            </h3>
            <p>
              ${clickedGame[0].desc}
            </p>
            <div class="about-game">
              <div class="release-date">Release Date: ${clickedGame[0].releaseDate}</div>
              <br />
              <div class="plat-form">Platforms: ${clickedGame[0].platforms}</div>
            </div>
            <div class="details-btns">
              <button id="download-btn">Download Now</button>
              <button id="fav-btn">
                <span><i class="fa-solid fa-circle-plus"></i></span> ADD TO
                FAVOURITES
              </button>
              <button id="community-btn">Community</button>
            </div>
          </article>
        </div>
        <div class="more-games">
          <h2>Most Popular</h2>
          <div class="line"></div>
          <article>
            <div class="games-cards">
              <div class="swiper-cards mySwiperCards">
                <div class="swiper-wrapper">
                  ${displayCards}
                </div>
                <div class="swiper-pagination-cards"></div>
                </div>
            </div>
          </article>
        </div>
      </div>
    `;
    // console.log(gameDetails);
     sessionStorage.setItem('gameDetails', gameDetails);
     location.href = "./gameDetails.html";

    
}


